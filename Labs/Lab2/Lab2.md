# Лабораторная работа. Просмотр таблицы MAC-адресов коммутатора

**Топология**

![](https://otuslabs.ucoz.net/Topology.jpg)

**Таблица адресации**

|Устройство  | Интерфейс  | IP-адрес | Маска подсети 
|:------------ |:---------------:| :-----: | ----------:
|S1    | VLAN 1 | 192.168.1.11 | 255.255.255.0 
|S2      | VLAN 1        |   192.168.1.12 | 255.255.255.0 
|PC-A | NIC | 192.168.1.1 | 255.255.255.0 
|PC-B | NIC | 192.168.1.2 | 255.255.255.0 

  **Цели**
**Часть 1. Создание и настройка сети**

**Часть 2. Изучение таблицы МАС-адресов коммутатора**

**Выполнение работы**
      
**Часть 1. Создание и настройка сети**
            Шаг 1. Подключите сеть в соответствии с топологией.
            Шаг 2. Настройте узлы ПК.
            Шаг 3. Выполните инициализацию и перезагрузку коммутаторов.
            Шаг 4. Настройте базовые параметры каждого коммутатора.


Откройте окно конфигурации
                a. Настройте имена устройств в соответствии с топологией.
                b. Настройте IP-адреса, как указано в таблице адресации.
                c. Назначьте cisco в качестве паролей консоли и VTY.
                d. Назначьте class в качестве пароля доступа к привилегированному режиму EXEC.

![](https://otuslabs.ucoz.net/S1_config.jpg)

![](https://otuslabs.ucoz.net/S2_config.jpg)


Закройте окно настройки.


**Часть 2. Изучение таблицы МАС-адресов коммутатора**

Как только между сетевыми устройствами начинается передача данных, коммутатор выясняет МАС-адреса и строит таблицу.
           ** Шаг 1. Запишите МАС-адреса сетевых устройств.**
                a. Откройте командную строку на PC-A и PC-B и введите команду ipconfig /all.

![](https://otuslabs.ucoz.net/PC_A_config.jpg)
![](https://otuslabs.ucoz.net/PC_B_config.jpg)


Вопрос:
Назовите физические адреса адаптера Ethernet.

**MAC-адрес компьютера PC-A: 000D.BD01.448B**

**MAC-адрес компьютера PC-B: 00D0.BC93.B085**

Закройте окно командной строки.
                b. Подключитесь к коммутаторам S1 и S2 через консоль и введите команду show interface F0/1 на каждом коммутаторе.

![](https://otuslabs.ucoz.net/INT_F01_S1.jpg)
![](https://otuslabs.ucoz.net/INT_F01_S2.jpg)


Откройте окно конфигурации
Вопросы:
Назовите адреса оборудования во второй строке выходных данных команды (или зашитый адрес — bia).


**МАС-адрес коммутатора S1 Fast Ethernet 0/1: 0001.9683.e201**

**МАС-адрес коммутатора S2 Fast Ethernet 0/1: 00e0.8f06.1801**


Закройте окно настройки.

**Шаг 2. Просмотрите таблицу МАС-адресов коммутатора.**

Подключитесь к коммутатору S2 через консоль и просмотрите таблицу МАС-адресов до и после тестирования сетевой связи с помощью эхо-запросов.

a. Подключитесь к коммутатору S2 через консоль и войдите в привилегированный режим EXEC.
Откройте окно конфигурации
b. В привилегированном режиме EXEC введите команду show mac address-table и нажмите клавишу ввода.

![](https://otuslabs.ucoz.net/S2_mac2.jpg)

Даже если сетевая коммуникация в сети не происходила (т. е. если команда ping не отправлялась), коммутатор может узнать МАС-адреса при подключении к ПК и другим коммутаторам.
Вопросы:
Записаны ли в таблице МАС-адресов какие-либо МАС-адреса? **Да, записаны адреса "соседних" устройств: коммутатор S1 и PC-BB**

Какие МАС-адреса записаны в таблице? С какими портами коммутатора они сопоставлены и каким устройствам принадлежат? Игнорируйте МАС-адреса, сопоставленные с центральным процессором.
Если вы не записали МАС-адреса сетевых устройств в шаге 1, как можно определить, каким устройствам принадлежат МАС-адреса, используя только выходные данные команды show mac address-table? Работает ли это решение в любой ситуации?

**если мы точно знаем какое устройство подключено в определенные порты, то можно понять какие адреса уже имеются в таблице, однако это не даёт 100% гарантии обнаружения всех подключенных устройств**


** Шаг 3. Очистите таблицу МАС-адресов коммутатора S2 и снова отобразите таблицу МАС-адресов.**
                a. В привилегированном режиме EXEC введите команду clear mac address-table dynamic и нажмите клавишу Enter.
S2# clear mac address-table dynamic
                b. Снова быстро введите команду show mac address-table.
 
![](https://otuslabs.ucoz.net/clear_and_sh_mac_addres-table_S2.jpg)

Вопросы:
Указаны ли в таблице МАС-адресов адреса для VLAN 1? **Нет, не указан**

 Указаны ли другие МАС-адреса? **Да, по прежнему указаны адреса соседних устройств**

Через 10 секунд введите команду show mac address-table и нажмите клавишу ввода. Появились ли в таблице МАС-адресов новые адреса? **Нет, не появились**
 
**Шаг 4. С компьютера PC-B отправьте эхо-запросы устройствам в сети и просмотрите таблицу МАС-адресов коммутатора**
               
 a. На компьютере PC-B откройте командную строку и еще раз введите команду arp -a.

Откройте командную строку.

**Вопрос:**
Не считая адресов многоадресной и широковещательной рассылки, сколько пар IP- и МАС-адресов устройств было получено через протокол ARP?
** Первичный запрос ARP таблицы не даёт результатов. Таблица пуста**

![](https://otuslabs.ucoz.net/arp_ping.jpg)
              
  b. Из командной строки PC-B отправьте эхо-запросы на компьютер PC-A, а также коммутаторы S1 и S2.

Вопрос:
От всех ли устройств получены ответы? Если нет, проверьте кабели и IP-конфигурации. **Ответы пришли от всех устройств. На PC-B появились записи Адрес-MAC устройств, к которым были отправлены ECHO запросы**

Закройте командную строку.

c. Подключившись через консоль к коммутатору S2, введите команду show mac address-table.
Откройте окно конфигурации

![](https://otuslabs.ucoz.net/sh_mac_addres-table_S2.jpg)

Вопрос:
Добавил ли коммутатор в таблицу МАС-адресов дополнительные МАС-адреса? Если да, то какие адреса и устройства? **Был добавлен адрес устройства PA-A**

На компьютере PC-B откройте командную строку и еще раз введите команду arp -a.

![](https://otuslabs.ucoz.net/PC_B_arp2.jpg)

Вопрос:
Появились ли в ARP-кэше компьютера PC-B дополнительные записи для всех сетевых устройств, которым были отправлены эхо-запросы? **Да, появились**

**Вопрос для повторения**

В сетях Ethernet данные передаются на устройства по соответствующим МАС-адресам. Для этого коммутаторы и компьютеры динамически создают ARP-кэш и таблицы МАС-адресов. Если компьютеров в сети немного, эта процедура выглядит достаточно простой. Какие сложности могут возникнуть в крупных сетях?

**Разрастание трафика, устаревание данных, когда имеющаяся в таблице связка Адрес-MAC уже устарела или не существует**
