## Лабораторная работа. Настройка IPv6-адресов на сетевых устройствах 

#### Топология

![топология](https://github.com/DowningSun/OTUS/assets/156109695/0c4bd050-92e4-4a05-a271-39b06363184c)


#### Таблица адресации

|Устройство  | Интерфейс  | IPv6-адрес | Длина префикса | Шлюз по умолчанию | 
|:------------ |:---------------:| :-----: | :----------: | --------: 
|R1    | G0/0/0 | 2001:db8:acad:a::1 | 64 | - | 
|     | G0/0/1 | 2001:db8:acad:1::1 | 64 | - |
|PC-A | NIC | 2001:db8:acad:1::3 | 64 | fe80::1 | 
|PC-B | NIC | 2001:db8:acad:a::3 | 64 | fe80::1 |  

**Задачи**

Часть 1. Настройка топологии и конфигурация основных параметров маршрутизатора и коммутатора
Часть 2. Ручная настройка IPv6-адресов
Часть 3. Проверка сквозного соединения

**Общие сведения/сценарий**

В этой лабораторной работе  вы будете настраивать хосты и интерфейсы устройств с IPv6-адресами.
Для просмотра индивидуальных и групповых IPv6-адресов вы будете использовать команду show.
Вы также будете проверять сквозное соединение с помощью команд ping and traceroute.

Примечание. Шаблон по умолчанию менеджера базы данных 2960 Switch Database Manager (SDM) не поддерживает IPv6.
Перед назначением IPv6-адреса SVI VLAN 1 может понадобиться выполнение команды sdm prefer dual-ipv4-and-ipv6 default для включения IPv6-адресации.

S1(config)# sdm prefer dual-ipv4-and-ipv6 default

S1(config)# end

S1# reload

![sdm prefer dual-ipv4-and-ipv6 default](https://github.com/DowningSun/OTUS/assets/156109695/abe78295-9881-48ac-a0d5-aa463156000e)

#### Выполнение работы

**Часть 1. Настройка топологии и конфигурация основных параметров маршрутизатора и коммутатора**

После подключения сети, инициализации и перезагрузки маршрутизатора и коммутатора выполните следующие действия:
            **Шаг 1. Настройте маршрутизатор.**
            
Назначьте имя хоста и настройте основные параметры устройства.
            **Шаг 2. Настройте коммутатор.**
            
Назначьте имя хоста и настройте основные параметры устройства.


**Часть 2. Ручная настройка IPv6-адресов**

**Шаг 1. Назначьте IPv6-адреса интерфейсам Ethernet на R1.**

a. Назначьте глобальные индивидуальные IPv6-адреса, указанные в таблице адресации обоим интерфейсам Ethernet на R1.
Откройте окно конфигурации
                
b. Введите команду show ipv6 interface brief, чтобы проверить, назначен ли каждому интерфейсу корректный индивидуальный IPv6-адрес.
Примечание. Отображаемый локальный адрес канала основан на адресации EUI-64, которая автоматически использует MAC-адрес интерфейса для создания 128-битного локального IPv6-адреса канала.

![sh1 int br](https://github.com/DowningSun/OTUS/assets/156109695/9ffcb8c8-adaa-4427-9724-668e711e294e)

c. Чтобы обеспечить соответствие локальных адресов канала индивидуальному адресу, вручную введите локальные адреса канала на каждом интерфейсе Ethernet на R1.
Примечание. Каждый интерфейс маршрутизатора относится к отдельной сети. Пакеты с локальным адресом канала никогда не выходят за пределы локальной сети, а значит, для обоих интерфейсов можно указывать один и тот же локальный адрес канала.
d. Используйте выбранную команду, чтобы убедиться, что локальный адрес связи изменен на fe80::1.

**Какие группы многоадресной рассылки назначены интерфейсу G0/0?**

![sh ipv6 int g00](https://github.com/DowningSun/OTUS/assets/156109695/0fe9ba44-a526-448e-91bf-9dc0fc74e7ab)

**Шаг 2.Активируйте IPv6-маршрутизацию на R1.**

a. В командной строке на PC-B введите команду ipconfig, чтобы получить данные IPv6-адреса, назначенного интерфейсу ПК.
Вопрос: Назначен ли индивидуальный IPv6-адрес сетевой интерфейсной карте (NIC) на PC-B? **Нет. По умолчанию автоназначение конфигураций отключено. Однако и после включения автоматического получения адреса, адрес присвоен не будетдо выполнения п.b.**

b. Активируйте IPv6-маршрутизацию на R1 с помощью команды IPv6 unicast-routing.
, чтобы убедиться, что новая многоадресная группа назначена интерфейсу G0/0/0. Обратите внимание, что в списке групп для интерфейса G0/0 отображается группа многоадресной рассылки всех маршрутизаторов (FF02::2).
Примечание. Это позволит компьютерам получать IP-адреса и данные шлюза по умолчанию с помощью функции SLAAC (Stateless Address Autoconfiguration (Автоконфигурация без сохранения состояния адреса)).

c. Теперь, когда R1 входит в группу многоадресной рассылки всех маршрутизаторов, еще раз введите команду ipconfig на PC-B. Проверьте данные IPv6-адреса.
                
![ipv6 unicas-routing](https://github.com/DowningSun/OTUS/assets/156109695/83c99724-64ef-4f1f-9af1-36d7550f71aa)
       
Вопрос:
Почему PC-B получил глобальный префикс маршрутизации и идентификатор подсети, которые вы настроили на R1? **На R1 IPv6 теперь являются частью многоадресной группы FF02::2. Роутер отправляет сообщения RA с информацией о префиксе всем узлам в локальной сети.
Все узлы, получившие это сообщение будут использовать префикс аналогичный префиксу роутера**

**Шаг 3.Назначьте IPv6-адреса интерфейсу управления (SVI) на S1.**
a.Назначьте адрес IPv6 для S1. Также назначьте этому интерфейсу локальный адрес канала.

![int Vlan1 conf](https://github.com/DowningSun/OTUS/assets/156109695/6a17f8b5-063f-40c1-9ebd-def9d23416df)

b. Проверьте правильность назначения IPv6-адресов интерфейсу управления с помощью команды show ipv6 interface vlan1.

![sh int VLAN1](https://github.com/DowningSun/OTUS/assets/156109695/ad8f2dd0-6155-475d-83c1-2c9a3f1ced5e)


**Шаг 4Назначьте компьютерам статические IPv6-адреса.**

                a. Откройте окно Свойства Ethernet для каждого ПК и назначьте адресацию IPv6.
                b. Убедитесь, что оба компьютера имеют правильную информацию адреса IPv6. Каждый компьютер должен иметь два глобальных адреса IPv6: один статический и один SLACC

![PC ab confnew](https://github.com/DowningSun/OTUS/assets/156109695/7a366860-ccf4-4667-9bb9-2e604ed34f53)

**Часть 3. Проверка сквозного подключения**
С PC-A отправьте эхо-запрос на FE80::1. Это локальный адрес канала, назначенный G0/1 на R1.
Отправьте эхо-запрос на интерфейс управления S1 с PC-A.

![PC-A ping](https://github.com/DowningSun/OTUS/assets/156109695/be6d1469-a9c6-469b-811a-48215237ef3c)

Введите команду tracert на PC-A, чтобы проверить наличие сквозного подключения к PC-B.

![PC-A tracert](https://github.com/DowningSun/OTUS/assets/156109695/d9e814ae-f134-4f46-b2da-c2c9a9ca8a12)

С PC-B отправьте эхо-запрос на PC-A.
С PC-B отправьте эхо-запрос на локальный адрес канала G0/0 на R1.

![PC-B ping](https://github.com/DowningSun/OTUS/assets/156109695/31e5c812-905b-4104-adb7-2fea96a37052)

Примечание.  В случае отсутствия сквозного подключения проверьте, правильно ли указаны IPv6-адреса на всех устройствах.


  **Вопросы для повторения**
        1. Почему обоим интерфейсам Ethernet на R1 можно назначить один и тот же локальный адрес канала — FE80::1? **Интерфейсы находятся в разных сетях, что позволяет назначить им одинаковые адреса**
        2. Какой идентификатор подсети в индивидуальном IPv6-адресе 2001:db8:acad::aaaa:1234/64? **2001:db8:acad:: / 64**

