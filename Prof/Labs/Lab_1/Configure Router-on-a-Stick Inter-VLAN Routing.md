# Внедрение маршрутизации между виртуальными локальными сетями с помощью роутера.

**Топология**

![image](https://github.com/DowningSun/OTUS/assets/156109695/b3502e16-befa-4024-9863-cf43a635bd45)

**Таблица адресации**

| Устройство | Интерфейс | IP-адрес | Маска подсети | Шлюз по умолчанию 
|:------------ |:---------------:| :-----: | :----------: | --------: |
|R1 |G0/0/1.3| 192.168.3.1 | 255.255.255.0 |  |
| | G0/0/1.4 | 192.168.4.1 | 255.255.255.0 |  |
| | G0/0/1.8 |  |  | |
| S1 | VLAN 3 | 192.168.3.11 | 255.255.255.0 | 192.168.3.1 |
| S2 | VLAN 3 | 192.168.3.12 | 255.255.255.0 | 192.168.3.1 |
| PC-A |NIC| 192.168.3.3 | 255.255.255.0 | 192.168.3.1 |
|PC-B |NIC | 192.168.4.3 | 255.255.255.0 | 192.168.4.1 |

**Таблица VLAN**

| VLAN | Имя | Назначенный интерфейс
|:------- |:------: |:------:|
|3 |Управление |S1: VLAN 3 S2: VLAN 3 S1: F0/6|
|4 |Operations |S2: F0/18|
|7 |Parking_Lot | S1: F0/2-4, F0/7-24, G0/1-2 С2: F0/2-17, F0/19-24, G0/1-2|
|8 |Native ||

Задачи

Часть 1. Создание сети и настройка основных параметров устройства

Часть 2. Создание сетей VLAN и назначение портов коммутатора

Часть 3. Настройка транка 802.1Q между коммутаторами.

Часть 4. Настройка маршрутизации между сетями VLAN

Часть 5. Проверка, что маршрутизация между VLAN работает

#### Ход работы:

#### Часть 1 

**Создание сети и настройка основных параметров устройства**

**Шаг 2. Настройте базовые параметры для маршрутизатора.**

a. Подключитесь к маршрутизатору с помощью консоли и активируйте привилегированный режим EXEC.
Откройте окно конфигурации
               
b. Войдите в режим конфигурации.

c. Назначьте маршрутизатору имя устройства.

d. Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.

e. Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.

f. Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.

g. Установите cisco в качестве пароля виртуального терминала и активируйте вход.

h. Зашифруйте открытые пароли.

i. Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.

j. Сохраните текущую конфигурацию в файл загрузочной конфигурации.

k. Настройте на маршрутизаторе время.

![R1 Preconf](https://github.com/DowningSun/OTUS/assets/156109695/35835045-8302-425b-9743-763be75a5e9e)

**Шаг 2. Настройте базовые параметры каждого коммутатора.**

a. Присвойте коммутатору имя устройства.

b. Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.

c. Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.

d. Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.

e. Установите cisco в качестве пароля виртуального терминала и активируйте вход.

f. Зашифруйте открытые пароли.

g. Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.

h. Настройте на коммутаторах время.

i. Сохранение текущей конфигурации в качестве начальной.

Закройте окно настройки.

![S1 S2 preconf](https://github.com/DowningSun/OTUS/assets/156109695/a7f595d4-b0ff-4b4c-a322-d1b1bbfeab78)

**Шаг 3. Настройте узлы ПК.**

Это было сложно, но мы справились.

#### Часть 2. Создание сетей VLAN и назначение портов коммутатора

Во второй части вы создадите VLAN, как указано в таблице выше, на обоих коммутаторах. Затем вы назначите VLAN соответствующему интерфейсу и проверите настройки конфигурации. Выполните следующие задачи на каждом коммутаторе.

**Шаг 1. Создайте сети VLAN на коммутаторах.**

a. Создайте и назовите необходимые VLAN на каждом коммутаторе из таблицы выше.

b. Настройте интерфейс управления и шлюз по умолчанию на каждом коммутаторе, используя информацию об IP-адресе в таблице адресации. 

c. Назначьте все неиспользуемые порты коммутатора VLAN Parking_Lot, настройте их для статического режима доступа и административно деактивируйте их.
Примечание. Команда interface range полезна для выполнения этой задачи с минимальным количеством команд.

![image](https://github.com/user-attachments/assets/0155c6e2-a44a-4c43-b088-3b1a8fc2a54e)

Аналогичным образом настраивается S2

Шаг 2. Назначьте сети VLAN соответствующим интерфейсам коммутатора.

a. Назначьте используемые порты соответствующей VLAN (указанной в таблице VLAN выше) и настройте их для режима статического доступа.

b. Убедитесь, что VLAN назначены на правильные интерфейсы.

![image](https://github.com/user-attachments/assets/1398875e-61c3-4c1e-9d31-2fc3a3f72aac)

Аналогичным способом настраивается пространство на  S2 согласно представленной таблице VLAN. 

#### Часть 3. Конфигурация магистрального канала стандарта 802.1Q между коммутаторами

**Шаг 1. Вручную настройте магистральный интерфейс F0/1 на коммутаторах S1 и S2.**

a. Настройка статического транкинга на интерфейсе F0/1 для обоих коммутаторов.

b. Установите native VLAN 8 на обоих коммутаторах.

c. Укажите, что VLAN 3, 4 и 8 могут проходить по транку.

d. Проверьте транки, native VLAN и разрешенные VLAN через транк.

![image](https://github.com/user-attachments/assets/a639d2ae-a905-44e6-b3bf-7c6199663496)

![image](https://github.com/user-attachments/assets/f418a6d2-03a2-459a-8c01-d546831c7315)

#### Часть 4. Настройка маршрутизации между сетями VLAN
**Шаг 1. Настройте маршрутизатор.**

a. При необходимости активируйте интерфейс G0/0/1 на маршрутизаторе.

b. Настройте подинтерфейсы для каждой VLAN, как указано в таблице IP-адресации. Все подинтерфейсы используют инкапсуляцию 802.1Q. Убедитесь, что подинтерфейсу для native VLAN не назначен IP-адрес. Включите описание для каждого подинтерфейса.

c. Убедитесь, что вспомогательные интерфейсы работают

![image](https://github.com/user-attachments/assets/c1f0cd2c-df86-40f2-bc0a-5bb4ce5332d7)

#### Часть 5. Проверьте, работает ли маршрутизация между VLAN
**Шаг 1. Выполните следующие тесты с PC-A. Все должно быть успешно.**

a. Отправьте эхо-запрос с PC-A на шлюз по умолчанию.

b. Отправьте эхо-запрос с PC-A на PC-B.

c. Отправьте команду ping с компьютера PC-A на коммутатор S2.

![image](https://github.com/user-attachments/assets/ec6bf87a-d7ad-4b02-8294-4cb000ac9e65)


**Шаг 2. Пройдите следующий тест с PC-B***

В окне командной строки на PC-B выполните команду tracert на адрес PC-A.

![image](https://github.com/user-attachments/assets/bc13a79d-3895-4aa9-a68e-7675ce9cbd06)


