#### Настройка OSPF

- Настроить OSPF в офисе Москва
- Разделить сеть на зоны
- Настроить фильтрацию между зонами

Описание/Пошаговая инструкция выполнения домашнего задания:
1. Маршрутизаторы R14-R15 находятся в зоне 0 - backbone.
2. Маршрутизаторы R12-R13 находятся в зоне 10. Дополнительно к маршрутам должны получать маршрут по умолчанию.
3. Маршрутизатор R19 находится в зоне 101 и получает только маршрут по умолчанию.
4. Маршрутизатор R20 находится в зоне 102 и получает все маршруты, кроме маршрутов до сетей зоны 101
5. Настройка для IPv6 повторяет логику IPv4.

#### Топология

![image](https://github.com/user-attachments/assets/0e515d99-038d-4dfa-bbe3-f778101dfa37)


Согласно задания маршрутизаторы R14 и R15 должны находится в Area0. Но при такой топологии существует разрыв между Area0, что противоречит правильному построению топологии OSPF.

Необходимо изменить схему добавив соединение между R14 и R15, R12 и R13:

![image](https://github.com/user-attachments/assets/1a415fb1-8280-4a2b-8650-69b7ae137682)

#### Конфигурация маршрутизаторов

1. Включаем на роутере процес OSPF для IPv4 и IPv6
          
       RX(config)#router ospf 1
       
2. Интерфейсы роутеров добавляем к анонсу OSPF IPv4 и IPv6 указывая номер AREA
 
       RX(config-if)#ip ospf 1 area X
 
3. По скольку в данной топологии все роутреы соеденены между собой точка-точка, то нет необходимости в выбое DR и BDR. Так же с помошью команды приведенной ниже прекратится рассылка LSA2, что снизит объем служебного трафика.
      
       RX(config-if)#ip ospf network point-to-point
       
 4. В случае отключения линка между R14 и R15 произойдет разрыв между Area0. Для этого нужно создать Virtual-Link между R12 и R13 для резервного маршрута. 
 
        R12(config-router)#area 10 virtual-link 13.13.13.13
        R13(config-router)#area 10 virtual-link 12.12.12.12

    
В связи с изменением схемы были внесены изменеия в адресацию.
| Хост | Порт | Адрес  | Сеть                | Направление     |
|-------|------|---------|-------------------|-----------------|
|	R14	|	e0/0	|	20.20.20.18	|	20.20.20.16/30	|	to	R12	e0/2	|
|	R14	|	e0/1	|	20.20.20.21	|	20.20.20.20/30	|	to	R15	e0/1	|
|	R14	|	e0/3	|	20.20.20.33	|	20.20.20.32/30	|	to	R19	e0/0	|
|	R15	|	e0/1	|	20.20.20.22	|	20.20.20.20/30	|	to	R14	e0/1	|
|	R15	|	e0/0	|	20.20.20.25	|	20.20.20.24/30	|	to	R13	e0/2	|
|	R15	|	e0/3	|	20.20.20.37	|	20.20.20.36/30	|	to	R20	e0/0	|
|	R12	|	e0/2	|	20.20.20.17	|	20.20.20.16/30	|	to	R14	e0/0	|
|	R12	|	e0/3	|	20.20.20.30	|	20.20.20.28/30	|	to	R13	e0/3	|
|	R13	|	e0/2	|	20.20.20.26	|	20.20.20.24/30	|	to	R15	e0/0	|
|	R13	|	e0/3	|	20.20.20.29	|	20.20.20.28/30	|	to	R12	e0/3	|
|	R19	|	e0/0	|	20.20.20.34	|	20.20.20.32/30	|	to	R14	e0/3	|
|	R20	|	e0/0	|	20.20.20.38	|	20.20.20.36/30	|	to	R15	e0/3	|



*Проверка связоности маршрутов*

Если линк между R14 и R15 поднят, то трафик от R19 идет следующим образом:

![image](https://github.com/user-attachments/assets/e9b11565-5abf-42ac-bd47-121f589027ca)

При разрыве линка R14 to R15 трафикпойдёт через virtual-link R12 to R13

![image](https://github.com/user-attachments/assets/3f4845b6-7a6d-4c2f-874f-7da735cd85a8)

Для анонса маршрута по умолчанию на маршрутизаторах смотрящих на провайдера т.е R14 и R15 выполняем

      R14(config-router)#default-information originate always 
      R15(config-router)#default-information originate always 

### 3. Маршрутизатор R19 находится в зоне 101 и получает только маршрут по умолчанию.

     R19(config-if)#ip ospf 1 area 101
     R19(config-if)#ipv6 ospf 1 area 101

Для выполнения данного задания необходимо на R14 маршрутизаторе выполнить команду:
 
     R14(config-router)#area 101 stub no-summary      
 
 На маршрутизаторе R19:
 
      R19(config-router)#area 101 stub
       
 После введенных настроек таблица маршрутизации на R19 выглядит: 

 ![image](https://github.com/user-attachments/assets/db51311e-11bd-4416-aca4-2511a9c554d7)

 ### 4. Маршрутизатор R20 находится в зоне 102 и получает все маршруты, кроме маршрутов до сетей зоны 101.

       
      R20(config-if)#ip ospf 1 area 102
      
Нужно выполнить фильтрацию маршрутов так, что бы R20 не получал маршрут из зоны 101. Т.е. не получал маршрут IPv4 10.10.20.32 /30

 На R15 необходимо создать prefix-list
 
    R15(config)#ip prefix-list NO_AREA101 seq 5 deny 10.10.20.32/30
    R15(config)#ip prefix-list NO_AREA101 seq 10 permit 0.0.0.0/0 le 32
    
 Далее в конфигурации протокола OSPF указать название prefix-list и действие prefix-list
 
    R15(config-router)#area 102 filter-list prefix NO_AREA101 in

В результате таблица маршрутизации преобретает следующий вид

![image](https://github.com/user-attachments/assets/0747aad0-ecb7-41f3-b9ac-f0ff23527261)


    
